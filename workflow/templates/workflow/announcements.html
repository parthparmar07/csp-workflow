{% extends 'workflow/base.html' %}
{% load django_bootstrap5 %}

{% block title %}Announcements - University Workflow Manager{% endblock %}
{% block announcements_active %}active{% endblock %}
{% block content_title %}Announcements{% endblock %}

{% block content %}
<div class="row mb-4">
    <div class="col-12 d-flex justify-content-between align-items-center">
        {% if user.is_teacher or user.is_admin %}
        <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#createAnnouncementModal">
            <i class="bi bi-plus-circle me-1"></i> New Announcement
        </button>
        {% endif %}
    </div>
</div>

<div class="row">
    <div class="col-md-3">
        <!-- Filters Card -->
        <div class="discord-card mb-4">
            <div class="discord-card-header">
                <h5 class="mb-0">Filters</h5>
            </div>
            <div class="discord-card-body">
                <div class="mb-3">
                    <label for="courseFilter" class="form-label text-light">Course</label>
                    <select class="form-select" id="courseFilter">
                        <option value="all" selected>All Courses</option>
                        <!-- Course options would be dynamically populated -->
                    </select>
                </div>
                
                <div class="mb-0">
                    <label for="dateFilter" class="form-label text-light">Date Range</label>
                    <select class="form-select" id="dateFilter">
                        <option value="all" selected>All Time</option>
                        <option value="today">Today</option>
                        <option value="week">This Week</option>
                        <option value="month">This Month</option>
                        <option value="semester">This Semester</option>
                    </select>
                </div>
            </div>
        </div>
    </div>
    
    <div class="col-md-9">
        <!-- Announcements List -->
        <div class="discord-card">
            <div class="discord-card-header">
                <h5 class="mb-0">Recent Announcements</h5>
            </div>
            <div class="discord-card-body">
                <!-- Announcement Item 1 -->
                <div class="announcement-item mb-4">
                    <div class="d-flex justify-content-between align-items-start mb-2">
                        <h5 class="text-accent mb-0">Welcome to the Spring Semester!</h5>
                        <small class="text-muted">Mar 1, 2025</small>
                    </div>
                    <p class="small text-light mb-1">Introduction to Computer Science (CS101)</p>
                    <p>Welcome to our course! This semester we'll be covering fundamental concepts in computer science including algorithms, data structures, and basic programming principles. The syllabus is now available on the course page.</p>
                    <div class="d-flex justify-content-between align-items-center">
                        <small class="text-muted">Posted by: Prof. Johnson</small>
                        <button class="btn btn-dark btn-sm">Read More</button>
                    </div>
                    <div class="divider mt-4"></div>
                </div>
                
                <!-- Announcement Item 2 -->
                <div class="announcement-item mb-4">
                    <div class="d-flex justify-content-between align-items-start mb-2">
                        <h5 class="text-accent mb-0">Midterm Schedule Change</h5>
                        <small class="text-muted">Mar 15, 2025</small>
                    </div>
                    <p class="small text-light mb-1">Advanced Data Structures (CS301)</p>
                    <p>Please note that the midterm exam has been rescheduled from March 25th to March 28th due to a conflict with another department event. The exam will still take place in Room 302 at 9:00 AM.</p>
                    <div class="d-flex justify-content-between align-items-center">
                        <small class="text-muted">Posted by: Prof. Smith</small>
                        <button class="btn btn-dark btn-sm">Read More</button>
                    </div>
                    <div class="divider mt-4"></div>
                </div>
                
                <!-- Announcement Item 3 -->
                <div class="announcement-item mb-0">
                    <div class="d-flex justify-content-between align-items-start mb-2">
                        <h5 class="text-accent mb-0">Group Project Guidelines</h5>
                        <small class="text-muted">Mar 20, 2025</small>
                    </div>
                    <p class="small text-light mb-1">Software Engineering (CS401)</p>
                    <p>The guidelines for the final group project have been posted. Please form teams of 3-4 students by April 5th and submit your project proposal by April 10th. Remember that each team must include students with different specializations.</p>
                    <div class="d-flex justify-content-between align-items-center">
                        <small class="text-muted">Posted by: Prof. Garcia</small>
                        <button class="btn btn-dark btn-sm">Read More</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Create Announcement Modal -->
{% if user.is_teacher or user.is_admin %}
<div class="modal fade" id="createAnnouncementModal" tabindex="-1">
    <div class="modal-dialog modal-lg">
        <div class="modal-content bg-dark text-light border border-secondary">
            <div class="modal-header border-secondary">
                <h5 class="modal-title">Create New Announcement</h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form>
                    <div class="mb-3">
                        <label for="announcementTitle" class="form-label">Title</label>
                        <input type="text" class="form-control bg-dark text-light border-secondary" id="announcementTitle">
                    </div>
                    <div class="mb-3">
                        <label for="announcementCourse" class="form-label">Course</label>
                        <select class="form-select bg-dark text-light border-secondary" id="announcementCourse">
                            <option selected>Select a course...</option>
                            <!-- Course options would be dynamically populated -->
                        </select>
                    </div>
                    <div class="mb-3">
                        <label for="announcementContent" class="form-label">Content</label>
                        <textarea class="form-control bg-dark text-light border-secondary" id="announcementContent" rows="5"></textarea>
                    </div>
                    <div class="form-check mb-3">
                        <input class="form-check-input" type="checkbox" value="" id="sendEmailCheck">
                        <label class="form-check-label" for="sendEmailCheck">
                            Send email notification to all course participants
                        </label>
                    </div>
                </form>
            </div>
            <div class="modal-footer border-secondary">
                <button type="button" class="btn btn-outline-light" data-bs-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-primary">Post Announcement</button>
            </div>
        </div>
    </div>
</div>
{% endif %}
{% endblock %}
